<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/social-media-icons/social-media-icons.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">

<link rel="import" href="../../bower_components/import-tinymce/import-tinymce.html">
<link rel="import" href="../../bower_components/polymer-tinymce/polymer-tinymce.html">

<link rel="import" href="../shared-styles.html">
<dom-module id="ar-article-create">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                height: 100%;
            }

            .post .cover {
                position: relative;
                width: 100%;
                height: 60vh;
            }

            .post .cover iron-image {
                width: 100%;
                height: 100%;
            }

            .post .filter {
                position: absolute;
                top: 0;
                left: 0;
                z-index: 1;
                width : 100%;
                height: 100%;
                color: #ffffff;
                font-weight: 400;
                font-size: 12px;
                background-color: rgba(0,0,0,0);
                background-image: -webkit-linear-gradient(rgba(0,0,0,0.4) 0%,rgba(0,0,0,.4) 75%,rgba(0,0,0,.4) 100%); 
                background-image: linear-gradient(rgba(0,0,0,0.4) 0%,rgba(0,0,0,.4) 75%,rgba(0,0,0,.4) 100%);
                display: flex;
                flex-direction: column;
                flex-wrap: nowrap;
                justify-content: center;
                align-items: center;
            }

            .post .filter h1.title {
                color: #f7f7f7;
                font-size: 47px;
                line-height: 52px;
                width: 80%;
                text-align: center;
                text-transform: none;
                letter-spacing: 0px;
            }

            .post .filter .article-info {
                display: block;
                width: 90%;
                margin: 20px 0;
                font-size: 20px;

                display: -ms-flexbox;
                display: -webkit-flex;
                display: flex;
                -webkit-flex-direction: row;
                -ms-flex-direction: row;
                flex-direction: row;
                -webkit-flex-wrap: nowrap;
                -ms-flex-wrap: nowrap;
                flex-wrap: nowrap;
                -webkit-justify-content: flex-start;
                -ms-flex-pack: start;
                justify-content: flex-start;
                -webkit-align-content: stretch;
                -ms-flex-line-pack: stretch;
                align-content: stretch;
                -webkit-align-items: center;
                -ms-flex-align: center;
                align-items: center;

            }

            .post .filter .article-info .avatar-ctn,
            .post .material.footer .comment .avatar-ctn {
                width: 64px;
                height: 64px;
                min-width: 64px;
                min-height: 64px;
                border-radius: 100%;
                overflow: hidden;
                display: inline-block;
                vertical-align: middle;
            }
            
            .post .filter .article-info .author-ctn,
            .post .material.footer .comment .author-ctn {
                display: inline-block;
                vertical-align: middle;
                padding-left: 12px;
            }
            
            .post .filter .article-info .social {
                /*height: 64px;*/
                padding: 0 8px;
                text-align: right;
                box-sizing: border-box;
                z-index: 1;
                -webkit-order: 0;
                -ms-flex-order: 0;
                order: 0;
                -webkit-flex: 1 1 auto;
                -ms-flex: 1 1 auto;
                flex: 1 1 auto;
                -webkit-align-self: auto;
                -ms-flex-item-align: auto;
                align-self: auto;
            }

            .post .secton-header {
            }

            .post .filter .article-info .autor-name a {
                text-decoration: none;
                color: #f7f7f7;
            }

            .post .material.footer .comment a {
                text-decoration: none;
                color: #56585c;
            }

            .post .filter .article-info .autor-name a:hover,
            .post .material.footer .comment a:hover {
                text-decoration: underline;
            }

            .post .filter .article-info .published {
                font-size: 0.6em;
            }

            .post .filter .article-info .category {
                /*height: 64px;*/
                padding-left: 12px;
                vertical-align: middle;
                -webkit-order: 0;
                -ms-flex-order: 0;
                order: 0;
                -webkit-flex: 1 1 auto;
                -ms-flex: 1 1 auto;
                flex: 1 1 auto;
                -webkit-align-self: auto;
                -ms-flex-item-align: auto;
                align-self: auto;
            }

            .post .filter .article-info .category a.tag {
                display: inline-block;
                background-color: #3eb7e9;
                color: #ffffff;
                text-align: center;
                text-decoration: none;
                padding: 2px 5px;
                border-radius: 2px;
                box-sizing: border-box;
            }

            .post .filter .article-info .category .tag:hover {
                background-color: #3eb7e9;
            }

            .post .filter .avatar-ctn iron-image.avatar,
            .post .footer .comment .author .avatar-ctn iron-image.avatarÂ {
                width: 64px;
                height: 64px;
            }

            .post .material.content {
                position: relative;
                background-color: #ffffff;
                color: #444444;
                max-width: 1000px;
                margin-left: auto;
                margin-right: auto;
                z-index: 3;
                -moz-transform: translateY(-100px);
                -webkit-transform: translateY(-100px);
                -o-transform: translateY(-100px);
                -ms-transform: translateY(-100px);
                transform: translateY(-100px);
            }
            
            .post .material.content article .section-header {
                text-align: right;
            }

            .post .material.footer {
                min-height: 128px;
                margin: 0;
            }

            .post .material.footer h2 {
                color: #56585c;
            }

            .post .material.footer h2 .icon {
                padding-right: 12px;
            }

            .post .material.footer:before {
                display: block;
                content: '';
                width: 30%;
                border-bottom: solid 1px #56585c
            }

            .post .material.footer .social paper-button {
                color: #ffffff;
            }
            
            .post .material.footer .social paper-button a {
                display: inline-block;
                color: #ffffff;
                text-decoration: none;
            }

            .post .material.footer .social paper-button.facebook {
                background-color: #3B5998;
            }
            
            .post .material.footer .social paper-button.facebook social-media-icons {
                margin-right: 8px;
                vertical-align: middle;
            }

            .post .material.footer .comment .material {
                background-color: #F7F7F7;
                min-height: 128px;
                margin: 0 0 12px 0;
            }
            
            .post .material.footer .comment .material .comment {
                margin-top: 8px;
            }

            .post .material.footer .comment .material .published {
                font-size: 0.6em;
            }

            .post .material.footer .comment .avatar-ctn {
                display: inline-block;
            }

            .post .material.footer .tags {
                margin-top: 20px;
            }

            .post .material.footer .tags .tag {
                display: inline-block;
                background-color: #56585c;
                color: #ffffff;
                font-size: 1em;
                font-weight: 400;
                text-align: center;
                text-decoration: none;
                padding: 2px 5px;
                border-radius: 2px;
                box-sizing: border-box;
            }

            .post .material.footer .tags .tag:hover {
                background-color: #3eb7e9;
            }

            .save-button {
                background-color: #179BD7;
                color: #FFFFFF;
            }

            /* Mobil */
            @media (max-width: 799px) {
                .post .material {
                    margin-top: 0;
                }

                .post .filter h1.title {
                    font-size: 27px;
                }

                .post .material.content {
                    -moz-transform: translateY(0px);
                    -webkit-transform: translateY(0px);
                    -o-transform: translateY(0px);
                    -ms-transform: translateY(0px);
                    transform: translateY(0px);
                }
            }
        </style>
        <firebase-document
            path="/articles"
            data="{{newArticleDate}}">
        </firebase-document>
        <div class="post">
            <div class="cover">
                <iron-image src="https://static.pexels.com/photos/25833/pexels-photo-25833.jpg" preload style="background: #3eb7e9;" fade sizing="cover"></iron-image>
                <div class="filter">
                    <h1 class="title">[[title]]</h1> 
                    <div class="article-info">
                        <div class="avatar-ctn">
                            <iron-image class="avatar" src="http://placehold.it/64/ffffff/000000" preload sizing="cover" style="background-color: lightgray;"></iron-image>
                        </div>
                        <div class="author-ctn">
                            <div class="autor-name">Par <a href="#" title="George R.R Martins">George R. R. Martin</a>,</div>
                            <div class="published">il y a 20 minutes</div>
                        </div>
                        <div class="category">
                            <a class="tag" href="/categorie/#google" title="Google">[[_ucfirst(article.name)]]</a>
                        </div>
                        <div class="social">
                            <span class="circle">
                                <iron-icon icon="question-answer"></iron-icon>
                                <paper-badge label="3"></paper-badge></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="material content">
                <div class="section-header">
                    <span></span>
                    <template is="dom-if" if={{isAdmin}}>
                        <paper-icon-button icon="create" raised on-tap="edit"
                            hidden$="[[editMode]]"></paper-icon-button>
                        <paper-icon-button icon="close" raised on-tap="close"
                            hidden$="[[!editMode]]"></paper-icon-button>
                    </template>
                </div>
                <!-- Edit content -->
                <!-- <template is="dom-if" if={{contentReady}}> -->
                    <template is="dom-if" if={{editMode}}>
                        <div class="edit">
                            <div class="section-header">
                                <paper-input
                                    id="articleTitle"
                                    label="Titre"
                                    value="{{title}}"></paper-input>
                                <paper-button
                                    class="save-button"
                                    raised
                                    on-tap="update">
                                    <iron-icon icon="done"></iron-icon>UPDATE</paper-button>
                            </div>
                            <div class="section-header">
                                <paper-input 
                                    id="githubValue"
                                    label="Github name"
                                    value="{{editData.github}}"></paper-input>
                            </div>
                        </div>
                    </template>
                <!-- </template> -->
                <polymer-tinymce id="editor"
                    base-url="[[origin]]/bower_components/tinymce"
                    hidden$="[[!editMode]]"
                    tinytoolbar="insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image" 
                    tinyplugins='["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste"]'
                ></polymer-tinymce>

                <article id="content">

                </article>
                <div class="material footer">
                    <div class="tags">
                        <a class="tag" href="#">Google</a>
                        <a class="tag" href="#">Facebook</a>
                        <a class="tag" href="#">Twitter</a>
                        <a class="tag" href="#">Microsoft</a>
                        <a class="tag" href="#">Amazon</a>
                        <a class="tag" href="#">Apple</a>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'ar-article-create',

            properties: {
                article: {
                    type: Object
                },

                isAdmin: {
                    type: Boolean,
                    value: true,
                },

                editMode: {
                    type: Boolean,
                    value: true,
                },

                origin: String
            },

            ready: function () {
                this.origin = window.location.origin;
            },

            createArticle: function (e) {
                this.push('newArticleDate', {

                });
            },

            _ucfirst: function (string) {
                if (string) {
                    return string.charAt(0).toUpperCase() + string.slice(1);
                }
                return '';
            },
        });
    </script>
</dom-module>